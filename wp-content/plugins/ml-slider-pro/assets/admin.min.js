window.jQuery(function(e){window.metaslider.app.EventManager.$on("metaslider/app-loaded",function(e){function i(e){t(e).each(function(){t(this).hide().siblings(".CodeMirror").remove(),CodeMirror.fromTextArea(this,{tabMode:"indent",mode:"xml",lineNumbers:!0,lineWrapping:!0,theme:"monokai",onChange:function(e){e.save()}})})}var t=window.jQuery,s=function(e){if(jQuery("#compatibilityWarning").remove(),jQuery(".metaslider .slide:not(."+e+")").length){var i=n(e)+" Slider is only compatible with Image and Post Feed slides.",t=jQuery("<div id='compatibilityWarning' class='updated'><p><b>Warning:</b> "+i+"</p></div>");jQuery(".metaslider .left").prepend(t)}},n=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};t(".metaslider").on("click",".select-slider",function(){s(jQuery(this).attr("rel"))}),s(jQuery(".metaslider .select-slider:checked").attr("rel")),i(t(".metaslider-ui .wysiwyg")),window.metaslider.app.EventManager.$on("metaslider/slides-created",function(){i(t(".metaslider-ui .wysiwyg"))}),t(".metaslider").on("change",".external input.extimgurl",function(){var e=t(this).val();t(this).parents(".slide").find(".thumb").css("background-image","url("+e+")")}),t(".metaslider").on("click","button.hide-slide input[type=checkbox]",function(e){e.stopPropagation()}),t(".metaslider").on("click","button.hide-slide",function(e){e.stopPropagation(),t(this).find("input[type=checkbox]").trigger("click"),t(this).closest("tr.slide").toggleClass("slide-is-hidden",t(this).find("input[type=checkbox]").is(":checked"))}),t(".metaslider select[name='template_tags']").live("change",function(e){e.preventDefault();var i=t(this).val(),s=t(this).closest(".tab").find(".CodeMirror")[0].CodeMirror;""==s.getSelection()?s.replaceRange(i,s.getCursor()):s.replaceSelection(i),s.focus()});var a=function(){t(".metaslider .datepicker").datepicker({dateFormat:"yy-mm-dd"}).on("focus",function(e){t(this).datepicker("widget").offset().top>t(this).offset().top?(t(this).datepicker("widget").addClass("bottom"),t(this).datepicker("widget").removeClass("top")):(t(this).datepicker("widget").addClass("top"),t(this).datepicker("widget").removeClass("bottom"))})};a(),window.metaslider.app.EventManager.$on("metaslider/slides-created",function(){a()}),t(".metaslider button.hide-slide input[type=checkbox]").each(function(e){t(this).closest("tr.slide").toggleClass("slide-is-hidden",t(this).is(":checked"))})})});